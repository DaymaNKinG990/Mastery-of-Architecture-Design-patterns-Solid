<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–æ–¥–∞</title>
    
    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/hint/show-hint.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/code-editor.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #f0f0f0;
        }
        h1 {
            color: #2196f3;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .success {
            color: #4caf50;
        }
        .info {
            color: #2196f3;
        }
        .code-exercise {
            margin: 20px 0;
        }
        .form-group {
            margin: 15px 0;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .form-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        .run-button {
            background: #2196f3;
            color: white;
        }
        .run-button:hover {
            background: #1976d2;
        }
        .run-button:disabled {
            background: #666;
            cursor: not-allowed;
        }
        .reset-button {
            background: #666;
            color: white;
        }
        .reset-button:hover {
            background: #888;
        }
        .exercise-output {
            margin-top: 20px;
            padding: 15px;
            border-radius: 6px;
            background: #1e1e1e;
        }
        .exercise-output.success {
            border-left: 4px solid #4caf50;
        }
        .exercise-output.error {
            border-left: 4px solid #f44336;
        }
        .test-list {
            list-style: none;
            padding: 0;
        }
        .test-list li {
            padding: 8px;
            margin: 5px 0;
            background: #333;
            border-radius: 4px;
        }
        .test-list li:before {
            content: '‚úì ';
            color: #4caf50;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üé® –¢–µ—Å—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–æ–¥–∞ CodeMirror</h1>
    
    <div class="test-section">
        <h2 class="info">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</h2>
        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:</p>
        <ul class="test-list">
            <li>–ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Python —Ä–∞–±–æ—Ç–∞–µ—Ç</li>
            <li>Tab –¥–æ–±–∞–≤–ª—è–µ—Ç 4 –ø—Ä–æ–±–µ–ª–∞ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ñ–æ–∫—É—Å–∞</li>
            <li>Shift+Tab —É–±–∏—Ä–∞–µ—Ç –æ—Ç—Å—Ç—É–ø</li>
            <li>Ctrl/Cmd+Enter –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–¥</li>
            <li>–ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —Å–∫–æ–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç</li>
            <li>–ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–∞—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç</li>
            <li>–ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è</li>
            <li>–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/–≤—Å—Ç–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</li>
        </ul>
    </div>

    <div class="test-section">
        <h2 class="success">–¢–µ—Å—Ç–æ–≤–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</h2>
        
        <div class="code-exercise" id="test_exercise">
            <form id="code_form_test_exercise" class="code-input-form">
                <div class="form-group">
                    <label for="code_input_test_exercise">–í–∞—à Python –∫–æ–¥:</label>
                    <textarea
                        id="code_input_test_exercise"
                        name="user_code"
                        class="code-textarea"
                        rows="15"
                        placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∫–æ–¥ –∑–¥–µ—Å—å..."
                        data-initial="def greet(name):\n    return f'Hello, {name}!'\n\n# –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏\nprint(greet('World'))"
                        spellcheck="false"
                        autocomplete="off"
                        autocorrect="off"
                        autocapitalize="off"
                    >def greet(name):
    return f'Hello, {name}!'

# –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏
print(greet('World'))</textarea>
                </div>
                <div class="form-actions">
                    <button type="button" id="run_button_test_exercise" class="run-button" onclick="testRun()">
                        üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥
                    </button>
                    <button type="button" class="reset-button" onclick="testReset()">
                        üîÑ –°–±—Ä–æ—Å–∏—Ç—å
                    </button>
                </div>
            </form>
            <div id="output_test_exercise" class="exercise-output" style="display: none;">
                <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h4>
                <div class="output-content"></div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2 class="info">–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏</h2>
        <ul>
            <li><strong>Tab</strong> - –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø (4 –ø—Ä–æ–±–µ–ª–∞)</li>
            <li><strong>Shift+Tab</strong> - —É–±—Ä–∞—Ç—å –æ—Ç—Å—Ç—É–ø</li>
            <li><strong>Ctrl/Cmd+Enter</strong> - –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥</li>
            <li><strong>Ctrl/Cmd+Z</strong> - –æ—Ç–º–µ–Ω–∏—Ç—å</li>
            <li><strong>Ctrl/Cmd+Y</strong> - –ø–æ–≤—Ç–æ—Ä–∏—Ç—å</li>
            <li><strong>Ctrl/Cmd+A</strong> - –≤—ã–¥–µ–ª–∏—Ç—å –≤—Å—ë</li>
            <li><strong>–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫</strong> - –≤—ã–¥–µ–ª–∏—Ç—å —Å–ª–æ–≤–æ</li>
            <li><strong>–¢—Ä–æ–π–Ω–æ–π –∫–ª–∏–∫</strong> - –≤—ã–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É</li>
        </ul>
    </div>

    <!-- CodeMirror JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/selection/active-line.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/hint/python-hint.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="assets/js/code-editor.js"></script>
    
    <script>
        function testRun() {
            const button = document.getElementById('run_button_test_exercise');
            const output = document.getElementById('output_test_exercise');
            const outputContent = output.querySelector('.output-content');
            
            button.innerHTML = '‚è≥ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...';
            button.disabled = true;
            
            setTimeout(() => {
                const code = window.getCodeValue('code_input_test_exercise');
                
                outputContent.innerHTML = `
                    <div class="success-message">
                        <h5 class="success">‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç!</h5>
                        <p>–í–≤–µ–¥–µ–Ω–Ω—ã–π –∫–æ–¥:</p>
                        <pre style="background: #1e1e1e; padding: 10px; border-radius: 4px; overflow-x: auto;">${code}</pre>
                        <p><strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –Ω—É–∂–µ–Ω Pyodide.</p>
                    </div>
                `;
                output.style.display = 'block';
                output.className = 'exercise-output success';
                
                button.innerHTML = 'üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥';
                button.disabled = false;
            }, 500);
        }
        
        function testReset() {
            window.resetCodeEditor('test_exercise');
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        window.addEventListener('load', () => {
            if (typeof CodeMirror !== 'undefined') {
                console.log('‚úÖ CodeMirror –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
            } else {
                console.error('‚ùå CodeMirror –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
            
            if (typeof window.initCodeEditor === 'function') {
                console.log('‚úÖ code-editor.js –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
            } else {
                console.error('‚ùå code-editor.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
            }
        });
    </script>
</body>
</html>

