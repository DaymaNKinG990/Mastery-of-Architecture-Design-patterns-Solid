# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è

## ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

**–û—à–∏–±–∫–∞:** `Uncaught SyntaxError: Unexpected identifier 'extraKeys' (at code-editor.js:46:9)`

**–ü—Ä–∏—á–∏–Ω–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –∑–∞–ø—è—Ç–∞—è –ø–æ—Å–ª–µ `inputStyle: 'textarea'` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 45

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```javascript
// –ë—ã–ª–æ (–û–®–ò–ë–ö–ê):
inputStyle: 'textarea'  // Use textarea (default) - more compatible
extraKeys: {

// –°—Ç–∞–ª–æ (–ò–°–ü–†–ê–í–õ–ï–ù–û):
inputStyle: 'textarea',  // Use textarea (default) - more compatible
extraKeys: {
```

## ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è –≤—ã–¥–µ–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞
CodeMirror 5 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –≤—ã–¥–µ–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è –º—ã—à–∏, –Ω–æ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π.

### –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è:

```javascript
let selectionStart = null;
let isSelecting = false;

// mousedown - –Ω–∞—á–∞–ª–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
editor.on('mousedown', (cm, event) => {
    const coords = cm.coordsChar({left: event.clientX, top: event.clientY});
    if (coords) {
        selectionStart = {line: coords.line, ch: coords.ch};
        isSelecting = true;
    }
    cm.focus();
});

// mousemove - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏
editor.on('mousemove', (cm, event) => {
    if (isSelecting && selectionStart && event.buttons === 1) {
        const coords = cm.coordsChar({left: event.clientX, top: event.clientY});
        if (coords) {
            const doc = cm.getDoc();
            doc.setSelection(selectionStart, {line: coords.line, ch: coords.ch});
        }
    }
});

// mouseup - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è
editor.on('mouseup', (cm, event) => {
    if (isSelecting && selectionStart) {
        const coords = cm.coordsChar({left: event.clientX, top: event.clientY});
        if (coords) {
            const doc = cm.getDoc();
            doc.setSelection(selectionStart, {line: coords.line, ch: coords.ch});
        }
    }
    isSelecting = false;
    selectionStart = null;
});
```

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **mousedown**: –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –∫–ª–∏–∫–∞ —á–µ—Ä–µ–∑ `coordsChar()`
2. **mousemove**: –ü—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏ (–∫–Ω–æ–ø–∫–∞ –º—ã—à–∏ –Ω–∞–∂–∞—Ç–∞) –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `setSelection()`
3. **mouseup**: –§–∏–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ñ–ª–∞–≥–∏

## üìä API CodeMirror 5 –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è

- `cm.coordsChar({left, top})` - –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –∏–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º—ã—à–∏
- `cm.getDoc().setSelection(start, end)` - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–∏–µ
- `cm.somethingSelected()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –≤—ã–¥–µ–ª–µ–Ω–∏–µ
- `cm.getSelection()` - –ø–æ–ª—É—á–∞–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å - –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç –º—ã—à–∫–æ–π:
   - –ó–∞–∂–º–∏—Ç–µ –õ–ö–ú
   - –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∫—É—Ä—Å–æ—Ä
   - –¢–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–¥–µ–ª–∏—Ç—å—Å—è

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
‚úèÔ∏è docs/assets/js/code-editor.js
   ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–ø—è—Ç–∞—è)
   ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –º—ã—à–∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è
   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API CodeMirror 5
```

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, –≤—ã–¥–µ–ª–µ–Ω–∏–µ —É–ª—É—á—à–µ–Ω–æ  
**–í–µ—Ä—Å–∏—è:** 1.0.5  
**–î–∞—Ç–∞:** 2024-11-24

